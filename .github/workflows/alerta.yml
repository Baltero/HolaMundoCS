name: NotificaciÃ³n a ntfy.sh

on:
  push:
    branches:
      - main

jobs:
  notificar:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout del cÃ³digo
        uses: actions/checkout@v3

      - name: Obtener hora actual
        id: fecha
        run: echo "time=$(date -u '+%Y-%m-%d %H:%M:%S UTC-4')" >> "$GITHUB_OUTPUT"

      - name: Enviar notificaciÃ³n a ntfy.sh
        run: |
          curl -H "Title: Nuevo push a main" \
               -H "Priority: high" \
               -d "ðŸš€ Push por: ${{ github.actor }}%0AðŸ”¢ Commit: ${{ github.sha }}%0AðŸ“¦ Repo: ${{ github.repository }}%0AðŸ•’ Fecha: ${{ steps.fecha.outputs.time }}" \
               https://ntfy.sh/devops-itla
